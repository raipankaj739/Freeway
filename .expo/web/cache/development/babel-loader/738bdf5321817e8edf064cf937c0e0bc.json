{"ast":null,"code":"import { findDOMNode } from 'react-dom';\nimport * as Creator from './Creator.web';\n/**\n * Taking a snapshot of DOM is not part of native browser behavior.\n * This is a hack to best emulate mobile functionality.\n * This implementation is based on https://github.com/pbakaus/domvas by Paul Bakaus http://paulbakaus.com/\n */\n\nexport default async function captureRef(component, options = {}) {\n  const element = getElement(component || document.body);\n  const {\n    format = 'png'\n  } = options;\n  const finalFormat = format.toLowerCase();\n\n  switch (finalFormat) {\n    case 'jpg':\n      return Creator.createJPEGAsync(element, options);\n\n    case 'png':\n      return Creator.createPNGAsync(element, options);\n\n    case 'raw':\n      return Creator.createPixelDataAsync(element, options);\n\n    case 'svg':\n      return Creator.createSVGAsync(element, options);\n\n    case 'blob':\n      return Creator.createBlobAsync(element, options);\n\n    default:\n      throw new Error(`takeSnapshotAsync: Unsupported format: ${finalFormat}`);\n  }\n}\n\nconst getElement = component => {\n  try {\n    return findDOMNode(component);\n  } catch (e) {\n    return component;\n  }\n};","map":{"version":3,"sources":["../../src/takeSnapshotAsync/captureRef.web.ts"],"names":[],"mappings":"AAAA,SAAS,WAAT,QAA4B,WAA5B;AAGA,OAAO,KAAK,OAAZ,MAAyB,eAAzB;AAGA;;;;;;AAKA,eAAe,eAAe,UAAf,CACb,SADa,EAEb,OAAA,GAA0B,EAFb,EAEe;AAE5B,QAAM,OAAO,GAAG,UAAU,CAAC,SAAS,IAAI,QAAQ,CAAC,IAAvB,CAA1B;AACA,QAAM;AAAE,IAAA,MAAM,GAAG;AAAX,MAAqB,OAA3B;AACA,QAAM,WAAW,GAAG,MAAM,CAAC,WAAP,EAApB;;AACA,UAAQ,WAAR;AACE,SAAK,KAAL;AACE,aAAO,OAAO,CAAC,eAAR,CAAwB,OAAxB,EAAiC,OAAjC,CAAP;;AACF,SAAK,KAAL;AACE,aAAO,OAAO,CAAC,cAAR,CAAuB,OAAvB,EAAgC,OAAhC,CAAP;;AACF,SAAK,KAAL;AACE,aAAO,OAAO,CAAC,oBAAR,CAA6B,OAA7B,EAAsC,OAAtC,CAAP;;AACF,SAAK,KAAL;AACE,aAAO,OAAO,CAAC,cAAR,CAAuB,OAAvB,EAAgC,OAAhC,CAAP;;AACF,SAAK,MAAL;AACE,aAAO,OAAO,CAAC,eAAR,CAAwB,OAAxB,EAAiC,OAAjC,CAAP;;AACF;AACE,YAAM,IAAI,KAAJ,CAAU,0CAA0C,WAAW,EAA/D,CAAN;AAZJ;AAcD;;AAED,MAAM,UAAU,GAAG,SAAS,IAAG;AAC7B,MAAI;AACF,WAAO,WAAW,CAAC,SAAD,CAAlB;AACD,GAFD,CAEE,OAAO,CAAP,EAAU;AACV,WAAO,SAAP;AACD;AACF,CAND","sourcesContent":["import { findDOMNode } from 'react-dom';\nimport { CaptureOptions } from 'react-native-view-shot';\n\nimport * as Creator from './Creator.web';\n\ndeclare const document: Document;\n/**\n * Taking a snapshot of DOM is not part of native browser behavior. \n * This is a hack to best emulate mobile functionality. \n * This implementation is based on https://github.com/pbakaus/domvas by Paul Bakaus http://paulbakaus.com/\n */\nexport default async function captureRef(\n  component: Element,\n  options: CaptureOptions = {}\n): Promise<string | Uint8ClampedArray | Blob> {\n  const element = getElement(component || document.body);\n  const { format = 'png' } = options;\n  const finalFormat = format.toLowerCase();\n  switch (finalFormat) {\n    case 'jpg':\n      return Creator.createJPEGAsync(element, options);\n    case 'png':\n      return Creator.createPNGAsync(element, options);\n    case 'raw':\n      return Creator.createPixelDataAsync(element, options);\n    case 'svg':\n      return Creator.createSVGAsync(element, options);\n    case 'blob':\n      return Creator.createBlobAsync(element, options);\n    default:\n      throw new Error(`takeSnapshotAsync: Unsupported format: ${finalFormat}`);\n  }\n}\n\nconst getElement = component => {\n  try {\n    return findDOMNode(component);\n  } catch (e) {\n    return component;\n  }\n};\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}