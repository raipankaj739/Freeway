{"ast":null,"code":"import uuidv4 from 'uuid/v4';\nexport default {\n  get name() {\n    return 'ExpoDocumentPicker';\n  },\n\n  async getDocumentAsync({\n    type = '*/*',\n    multiple = false\n  }) {\n    const input = document.createElement('input');\n    input.style.display = 'none';\n    input.setAttribute('type', 'file');\n    input.setAttribute('accept', type);\n    input.setAttribute('id', uuidv4());\n\n    if (multiple) {\n      input.setAttribute('multiple', 'multiple');\n    }\n\n    document.body.appendChild(input);\n    return new Promise((resolve, reject) => {\n      input.addEventListener('change', () => {\n        if (input.files) {\n          const targetFile = input.files[0];\n          const reader = new FileReader();\n\n          reader.onerror = () => {\n            reject('Failed to read the selected media because the operation failed.');\n          };\n\n          reader.onload = ({\n            target\n          }) => {\n            const uri = target.result;\n            resolve({\n              type: 'success',\n              uri,\n              name: targetFile.name,\n              file: targetFile,\n              lastModified: targetFile.lastModified,\n              size: targetFile.size,\n              output: input.files\n            });\n          }; // Read in the image file as a binary string.\n\n\n          reader.readAsDataURL(targetFile);\n        } else {\n          resolve({\n            type: 'cancel'\n          });\n        }\n\n        document.body.removeChild(input);\n      });\n      const event = new MouseEvent('click');\n      input.dispatchEvent(event);\n    });\n  }\n\n};","map":{"version":3,"sources":["../src/ExpoDocumentPicker.web.ts"],"names":[],"mappings":"AAAA,OAAO,MAAP,MAAmB,SAAnB;AAIA,eAAe;AACb,MAAI,IAAJ,GAAQ;AACN,WAAO,oBAAP;AACD,GAHY;;AAKb,QAAM,gBAAN,CAAuB;AACrB,IAAA,IAAI,GAAG,KADc;AAErB,IAAA,QAAQ,GAAG;AAFU,GAAvB,EAGwB;AACtB,UAAM,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAd;AACA,IAAA,KAAK,CAAC,KAAN,CAAY,OAAZ,GAAsB,MAAtB;AACA,IAAA,KAAK,CAAC,YAAN,CAAmB,MAAnB,EAA2B,MAA3B;AACA,IAAA,KAAK,CAAC,YAAN,CAAmB,QAAnB,EAA6B,IAA7B;AACA,IAAA,KAAK,CAAC,YAAN,CAAmB,IAAnB,EAAyB,MAAM,EAA/B;;AACA,QAAI,QAAJ,EAAc;AACZ,MAAA,KAAK,CAAC,YAAN,CAAmB,UAAnB,EAA+B,UAA/B;AACD;;AAED,IAAA,QAAQ,CAAC,IAAT,CAAc,WAAd,CAA0B,KAA1B;AAEA,WAAO,IAAI,OAAJ,CAAY,CAAC,OAAD,EAAU,MAAV,KAAoB;AACrC,MAAA,KAAK,CAAC,gBAAN,CAAuB,QAAvB,EAAiC,MAAK;AACpC,YAAI,KAAK,CAAC,KAAV,EAAiB;AACf,gBAAM,UAAU,GAAG,KAAK,CAAC,KAAN,CAAY,CAAZ,CAAnB;AACA,gBAAM,MAAM,GAAG,IAAI,UAAJ,EAAf;;AACA,UAAA,MAAM,CAAC,OAAP,GAAiB,MAAK;AACpB,YAAA,MAAM,CAAC,iEAAD,CAAN;AACD,WAFD;;AAGA,UAAA,MAAM,CAAC,MAAP,GAAgB,CAAC;AAAE,YAAA;AAAF,WAAD,KAAe;AAC7B,kBAAM,GAAG,GAAI,MAAc,CAAC,MAA5B;AACA,YAAA,OAAO,CAAC;AACN,cAAA,IAAI,EAAE,SADA;AAEN,cAAA,GAFM;AAGN,cAAA,IAAI,EAAE,UAAU,CAAC,IAHX;AAIN,cAAA,IAAI,EAAE,UAJA;AAKN,cAAA,YAAY,EAAE,UAAU,CAAC,YALnB;AAMN,cAAA,IAAI,EAAE,UAAU,CAAC,IANX;AAON,cAAA,MAAM,EAAE,KAAK,CAAC;AAPR,aAAD,CAAP;AASD,WAXD,CANe,CAkBf;;;AACA,UAAA,MAAM,CAAC,aAAP,CAAqB,UAArB;AACD,SApBD,MAoBO;AACL,UAAA,OAAO,CAAC;AAAE,YAAA,IAAI,EAAE;AAAR,WAAD,CAAP;AACD;;AAED,QAAA,QAAQ,CAAC,IAAT,CAAc,WAAd,CAA0B,KAA1B;AACD,OA1BD;AA4BA,YAAM,KAAK,GAAG,IAAI,UAAJ,CAAe,OAAf,CAAd;AACA,MAAA,KAAK,CAAC,aAAN,CAAoB,KAApB;AACD,KA/BM,CAAP;AAgCD;;AApDY,CAAf","sourcesContent":["import uuidv4 from 'uuid/v4';\n\nimport { DocumentResult, DocumentPickerOptions } from './types';\n\nexport default {\n  get name(): string {\n    return 'ExpoDocumentPicker';\n  },\n\n  async getDocumentAsync({\n    type = '*/*',\n    multiple = false,\n  }: DocumentPickerOptions): Promise<DocumentResult> {\n    const input = document.createElement('input');\n    input.style.display = 'none';\n    input.setAttribute('type', 'file');\n    input.setAttribute('accept', type);\n    input.setAttribute('id', uuidv4());\n    if (multiple) {\n      input.setAttribute('multiple', 'multiple');\n    }\n\n    document.body.appendChild(input);\n\n    return new Promise((resolve, reject) => {\n      input.addEventListener('change', () => {\n        if (input.files) {\n          const targetFile = input.files[0];\n          const reader = new FileReader();\n          reader.onerror = () => {\n            reject('Failed to read the selected media because the operation failed.');\n          };\n          reader.onload = ({ target }) => {\n            const uri = (target as any).result;\n            resolve({\n              type: 'success',\n              uri,\n              name: targetFile.name,\n              file: targetFile,\n              lastModified: targetFile.lastModified,\n              size: targetFile.size,\n              output: input.files,\n            });\n          };\n          // Read in the image file as a binary string.\n          reader.readAsDataURL(targetFile);\n        } else {\n          resolve({ type: 'cancel' });\n        }\n\n        document.body.removeChild(input);\n      });\n\n      const event = new MouseEvent('click');\n      input.dispatchEvent(event);\n    });\n  },\n};\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}