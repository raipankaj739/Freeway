{"ast":null,"code":"import invariant from 'invariant';\nconst EventTypes = ['url'];\nconst listeners = [];\n\nfunction _validateURL(url) {\n  invariant(typeof url === 'string', `Invalid URL: should be a string. Instead found: ${url}`);\n  invariant(url, 'Invalid URL: cannot be empty');\n} // TODO: Bacon: For better parity this should extend EventEmitter like React Native.\n\n\nclass Linking {\n  addEventListener(type, listener) {\n    invariant(EventTypes.indexOf(type) !== -1, `Linking.addEventListener(): ${type} is not a valid event`);\n\n    const nativeListener = nativeEvent => listener({\n      url: window.location.href,\n      nativeEvent\n    });\n\n    listeners.push({\n      listener,\n      nativeListener\n    });\n    window.addEventListener('message', nativeListener, false);\n  }\n\n  removeEventListener(type, listener) {\n    invariant(EventTypes.indexOf(type) !== -1, `Linking.removeEventListener(): ${type} is not a valid event.`);\n    const listenerIndex = listeners.findIndex(pair => pair.listener === listener);\n    invariant(listenerIndex !== -1, 'Linking.removeEventListener(): cannot remove an unregistered event listener.');\n    const nativeListener = listeners[listenerIndex].nativeListener;\n    window.removeEventListener('message', nativeListener, false);\n    listeners.splice(listenerIndex, 1);\n  }\n\n  async canOpenURL(url) {\n    _validateURL(url);\n\n    return true;\n  }\n\n  async getInitialURL() {\n    return window.location.href;\n  }\n\n  async openURL(url) {\n    _validateURL(url);\n\n    window.location.href = url;\n  }\n\n}\n\nexport default new Linking();","map":{"version":3,"sources":["../../src/Linking/LinkingModule.web.ts"],"names":[],"mappings":"AAAA,OAAO,SAAP,MAAsB,WAAtB;AAIA,MAAM,UAAU,GAAG,CAAC,KAAD,CAAnB;AAEA,MAAM,SAAS,GAAwE,EAAvF;;AAEA,SAAS,YAAT,CAAsB,GAAtB,EAAiC;AAC/B,EAAA,SAAS,CAAC,OAAO,GAAP,KAAe,QAAhB,EAA0B,mDAAmD,GAAG,EAAhF,CAAT;AACA,EAAA,SAAS,CAAC,GAAD,EAAM,8BAAN,CAAT;AACD,C,CAED;;;AACA,MAAM,OAAN,CAAa;AACX,EAAA,gBAAgB,CAAC,IAAD,EAAc,QAAd,EAAmC;AACjD,IAAA,SAAS,CACP,UAAU,CAAC,OAAX,CAAmB,IAAnB,MAA6B,CAAC,CADvB,EAEP,+BAA+B,IAAI,uBAF5B,CAAT;;AAIA,UAAM,cAAc,GAAsB,WAAW,IACnD,QAAQ,CAAC;AAAE,MAAA,GAAG,EAAE,MAAM,CAAC,QAAP,CAAgB,IAAvB;AAA6B,MAAA;AAA7B,KAAD,CADV;;AAEA,IAAA,SAAS,CAAC,IAAV,CAAe;AAAE,MAAA,QAAF;AAAY,MAAA;AAAZ,KAAf;AACA,IAAA,MAAM,CAAC,gBAAP,CAAwB,SAAxB,EAAmC,cAAnC,EAAmD,KAAnD;AACD;;AAED,EAAA,mBAAmB,CAAC,IAAD,EAAc,QAAd,EAAmC;AACpD,IAAA,SAAS,CACP,UAAU,CAAC,OAAX,CAAmB,IAAnB,MAA6B,CAAC,CADvB,EAEP,kCAAkC,IAAI,wBAF/B,CAAT;AAIA,UAAM,aAAa,GAAG,SAAS,CAAC,SAAV,CAAoB,IAAI,IAAI,IAAI,CAAC,QAAL,KAAkB,QAA9C,CAAtB;AACA,IAAA,SAAS,CACP,aAAa,KAAK,CAAC,CADZ,EAEP,8EAFO,CAAT;AAIA,UAAM,cAAc,GAAG,SAAS,CAAC,aAAD,CAAT,CAAyB,cAAhD;AACA,IAAA,MAAM,CAAC,mBAAP,CAA2B,SAA3B,EAAsC,cAAtC,EAAsD,KAAtD;AACA,IAAA,SAAS,CAAC,MAAV,CAAiB,aAAjB,EAAgC,CAAhC;AACD;;AAED,QAAM,UAAN,CAAiB,GAAjB,EAA4B;AAC1B,IAAA,YAAY,CAAC,GAAD,CAAZ;;AACA,WAAO,IAAP;AACD;;AAED,QAAM,aAAN,GAAmB;AACjB,WAAO,MAAM,CAAC,QAAP,CAAgB,IAAvB;AACD;;AAED,QAAM,OAAN,CAAc,GAAd,EAAyB;AACvB,IAAA,YAAY,CAAC,GAAD,CAAZ;;AACA,IAAA,MAAM,CAAC,QAAP,CAAgB,IAAhB,GAAuB,GAAvB;AACD;;AAvCU;;AA0Cb,eAAe,IAAI,OAAJ,EAAf","sourcesContent":["import invariant from 'invariant';\n\nimport { URLListener, NativeURLListener } from './Linking.types';\n\nconst EventTypes = ['url'];\n\nconst listeners: Array<{ listener: URLListener; nativeListener: NativeURLListener }> = [];\n\nfunction _validateURL(url: string): void {\n  invariant(typeof url === 'string', `Invalid URL: should be a string. Instead found: ${url}`);\n  invariant(url, 'Invalid URL: cannot be empty');\n}\n\n// TODO: Bacon: For better parity this should extend EventEmitter like React Native.\nclass Linking {\n  addEventListener(type: 'url', listener: URLListener): void {\n    invariant(\n      EventTypes.indexOf(type) !== -1,\n      `Linking.addEventListener(): ${type} is not a valid event`\n    );\n    const nativeListener: NativeURLListener = nativeEvent =>\n      listener({ url: window.location.href, nativeEvent });\n    listeners.push({ listener, nativeListener });\n    window.addEventListener('message', nativeListener, false);\n  }\n\n  removeEventListener(type: 'url', listener: URLListener): void {\n    invariant(\n      EventTypes.indexOf(type) !== -1,\n      `Linking.removeEventListener(): ${type} is not a valid event.`\n    );\n    const listenerIndex = listeners.findIndex(pair => pair.listener === listener);\n    invariant(\n      listenerIndex !== -1,\n      'Linking.removeEventListener(): cannot remove an unregistered event listener.'\n    );\n    const nativeListener = listeners[listenerIndex].nativeListener;\n    window.removeEventListener('message', nativeListener, false);\n    listeners.splice(listenerIndex, 1);\n  }\n\n  async canOpenURL(url: string): Promise<boolean> {\n    _validateURL(url);\n    return true;\n  }\n\n  async getInitialURL(): Promise<string> {\n    return window.location.href;\n  }\n\n  async openURL(url: string): Promise<void> {\n    _validateURL(url);\n    window.location.href = url;\n  }\n}\n\nexport default new Linking();\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}